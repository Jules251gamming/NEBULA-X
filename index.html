<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>NEBULA-X | Heavy Console</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --neon: #22d3ee;
            --heavy-bg: #020202;
            --glass: rgba(10, 10, 10, 0.85);
        }
        body { background: var(--heavy-bg); color: #fff; font-family: 'Fira Code', monospace; perspective: 1000px; }
        
        /* Effet de profondeur 3D sur les cartes */
        .heavy-card {
            background: var(--glass);
            border: 2px solid rgba(34, 211, 238, 0.15);
            box-shadow: 0 20px 50px rgba(0,0,0,0.8), inset 0 0 20px rgba(34, 211, 238, 0.05);
            transform: rotateX(5deg);
            transition: 0.5s;
        }
        .heavy-card:hover { transform: rotateX(0deg) scale(1.02); border-color: var(--neon); }

        /* Bordure animée "Chargement" */
        .neon-scan {
            position: relative; overflow: hidden;
        }
        .neon-scan::after {
            content: ""; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: conic-gradient(transparent, transparent, transparent, var(--neon));
            animation: rotate 4s linear infinite; z-index: -1;
        }
        @keyframes rotate { 100% { transform: rotate(360deg); } }

        .btn-heavy {
            background: linear-gradient(45deg, #111, #22d3ee22);
            border: 1px solid var(--neon);
            box-shadow: 0 0 15px rgba(34, 211, 238, 0.3);
            cursor: pointer; transition: 0.3s;
        }
        .btn-heavy:hover { box-shadow: 0 0 30px var(--neon); filter: brightness(1.2); }
    </style>
</head>
<body class="p-0 m-0 overflow-hidden bg-grid">

    <nav class="relative z-[100] w-full border-b-4 border-cyan-500/40 bg-black py-4 px-10 flex justify-between items-center shadow-[0_10px_30px_rgba(0,0,0,1)]">
        <div class="text-2xl font-black italic text-cyan-500 tracking-tighter">NEBULA-X <span class="text-[8px] border p-1 ml-2">V.4.0_HEAVY</span></div>
        <div class="flex gap-10 text-[10px] font-black uppercase tracking-[0.3em]">
            <a href="index.html" class="text-cyan-400 border-b-2 border-cyan-400">Main_Console</a>
            <a href="network.html" class="text-gray-600 hover:text-white transition">Satellite_Map</a>
            <a href="ports.html" class="text-gray-600 hover:text-white transition">Port_Striker</a>
            <a href="database.html" class="text-gray-600 hover:text-white transition">Nexus_Logs</a>
        </div>
    </nav>

    <div id="auth-gate" class="fixed inset-0 z-[1000] bg-black/98 flex items-center justify-center">
        <div class="heavy-card p-12 text-center border-t-8 border-cyan-500 max-w-lg">
            <h2 class="text-4xl font-black italic text-white mb-2">IDENTIFICATION</h2>
            <div class="w-full h-1 bg-white/10 my-6 relative"><div class="absolute h-full bg-cyan-500 w-1/2 animate-pulse"></div></div>
            <p class="text-cyan-500/50 text-[10px] mb-8 tracking-[0.5em]">SYSTEM_KEY: BLOGGER96_LOGGED</p>
            <button onclick="unlock()" class="btn-heavy w-full py-5 text-[12px] font-black">ACTIVER LE NOYAU</button>
        </div>
    </div>

    <main class="grid grid-cols-12 gap-8 p-10 h-screen">
        
        <div class="col-span-4 space-y-8">
            <div class="heavy-card p-6 border-l-4 border-cyan-500">
                <h3 class="text-xs font-black mb-4 text-cyan-500 uppercase tracking-widest italic">Source_Intel</h3>
                <div class="space-y-3">
                    <div class="flex justify-between bg-black/50 p-2 border border-white/5">
                        <span class="text-[9px] text-gray-500 uppercase">IP_V4</span>
                        <span id="ip" class="text-xs font-bold text-cyan-400">---.---.---.---</span>
                    </div>
                    <div class="flex justify-between bg-black/50 p-2 border border-white/5">
                        <span class="text-[9px] text-gray-500 uppercase">Status</span>
                        <span class="text-[9px] text-green-500 font-black animate-pulse">ENCRYPTION_ACTIVE</span>
                    </div>
                </div>
            </div>

            <div class="heavy-card p-6 neon-scan">
                <h3 class="text-xs font-black mb-4 text-white uppercase italic">Command_Launcher</h3>
                <input type="text" id="target" placeholder="TARGET_DOMAIN" class="w-full bg-black/80 border-b-2 border-cyan-500 p-4 text-cyan-400 font-bold mb-4 outline-none">
                <button onclick="runHeavyAudit()" class="btn-heavy w-full py-4 text-[10px] font-black">INITIALISER L'ASSAUT</button>
            </div>
        </div>

        <div class="col-span-8">
            <div class="heavy-card h-full flex flex-col bg-black/90">
                <div class="bg-cyan-500/10 p-3 flex justify-between items-center border-b border-cyan-500/30">
                    <span class="text-[10px] font-black text-cyan-500 italic uppercase">Global_Live_Terminal</span>
                    <div class="flex gap-2">
                        <div class="w-2 h-2 rounded-full bg-red-500"></div>
                        <div class="w-2 h-2 rounded-full bg-cyan-500"></div>
                    </div>
                </div>
                <div id="console" class="flex-grow p-6 font-mono text-[11px] overflow-y-auto space-y-2 leading-relaxed">
                    <div class="text-gray-600 font-black tracking-widest">>> WAITING FOR INPUT...</div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Detection IP
        fetch('https://api.ipify.org?format=json').then(r=>r.json()).then(d=>document.getElementById('ip').innerText = d.ip);

        function unlock() {
            document.getElementById('auth-gate').style.display = 'none';
        }

        async function runHeavyAudit() {
            const target = document.getElementById('target').value;
            const con = document.getElementById('console');
            const ip = document.getElementById('ip').innerText;
            if(!target) return;

            con.innerHTML += `<div class="text-cyan-500 font-black">> INITIATING DEEP SCAN ON ${target}...</div>`;
            con.innerHTML += `<div class="text-gray-500">> LINKING GITHUB MASTER LOGS [Jules251gamming]...</div>`;

            // Envoi réel vers ton serveur Render (GitHub Log)
            try {
                const res = await fetch('/api/diagnostic', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ target: target, userIp: ip })
                });
                if(res.ok) {
                    con.innerHTML += `<div class="text-green-500 font-black">> [SUCCESS] PACKET_RECORD_ID: ${Math.random().toString(36).substr(2, 9).toUpperCase()} SENT TO GITHUB.</div>`;
                }
            } catch(e) {
                con.innerHTML += `<div class="text-red-500 font-black">> ERROR: CONNECTION_TIMEOUT</div>`;
            }
            con.scrollTop = con.scrollHeight;
        }
    </script>
</body>
</html>
